{"ast":null,"code":"var _jsxFileName = \"/home/gopal/PycharmProjects/Weetwood_react/frontend/src/Icicleplot.js\";\n// src/IciclePlot.js\nimport React, { useEffect, useRef } from 'react';\nimport * as d3 from 'd3';\nconst IciclePlot = ({\n  data\n}) => {\n  const ref = useRef();\n  useEffect(() => {\n    const width = 960;\n    const height = 500;\n    const color = d3.scaleOrdinal(d3.schemeCategory10);\n    const partition = data => {\n      const root = d3.hierarchy(data).sum(d => d.value).sort((a, b) => b.value - a.value);\n      return d3.partition().size([height, width])(root);\n    };\n    const root = partition(data);\n    const svg = d3.select(ref.current).attr('width', width).attr('height', height);\n    svg.selectAll(\"*\").remove(); // Clear previous contents if any\n\n    const rects = svg.selectAll(\"rect\").data(root.descendants()).enter().append(\"rect\").attr(\"class\", \"node\").attr(\"x\", d => d.y0).attr(\"y\", d => d.x0).attr(\"width\", d => d.y1 - d.y0).attr(\"height\", d => d.x1 - d.x0).attr(\"fill\", d => color((d.children ? d : d.parent).data.name)).on(\"click\", (event, d) => {\n      svg.transition().duration(750).tween(\"scale\", () => {\n        const xd = d3.interpolate(root.y0, d.y0),\n          yd = d3.interpolate(root.x0, d.x0),\n          kx = width / (d.y1 - d.y0),\n          ky = height / (d.x1 - d.x0);\n        return t => {\n          root.y0 = xd(t);\n          root.x0 = yd(t);\n          svg.selectAll(\"rect\").attr(\"x\", d => d.y0).attr(\"y\", d => d.x0).attr(\"width\", d => d.y1 - d.y0).attr(\"height\", d => d.x1 - d.x0);\n        };\n      });\n    });\n    svg.selectAll(\"text\").data(root.descendants()).enter().append(\"text\").attr(\"class\", \"label\").attr(\"x\", d => d.y0 + 4).attr(\"y\", d => (d.x0 + d.x1) / 2).text(d => d.data.name).style(\"fill\", \"#fff\");\n  }, [data]);\n  return /*#__PURE__*/React.createElement(\"svg\", {\n    ref: ref,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 72,\n      columnNumber: 5\n    }\n  });\n};\nexport default IciclePlot;","map":{"version":3,"names":["React","useEffect","useRef","d3","IciclePlot","data","ref","width","height","color","scaleOrdinal","schemeCategory10","partition","root","hierarchy","sum","d","value","sort","a","b","size","svg","select","current","attr","selectAll","remove","rects","descendants","enter","append","y0","x0","y1","x1","children","parent","name","on","event","transition","duration","tween","xd","interpolate","yd","kx","ky","t","text","style","createElement","__self","__source","fileName","_jsxFileName","lineNumber","columnNumber"],"sources":["/home/gopal/PycharmProjects/Weetwood_react/frontend/src/Icicleplot.js"],"sourcesContent":["// src/IciclePlot.js\nimport React, { useEffect, useRef } from 'react';\nimport * as d3 from 'd3';\n\nconst IciclePlot = ({ data }) => {\n  const ref = useRef();\n\n  useEffect(() => {\n    const width = 960;\n    const height = 500;\n\n    const color = d3.scaleOrdinal(d3.schemeCategory10);\n\n    const partition = data => {\n      const root = d3.hierarchy(data)\n        .sum(d => d.value)\n        .sort((a, b) => b.value - a.value);\n      return d3.partition()\n        .size([height, width])\n        (root);\n    };\n\n    const root = partition(data);\n\n    const svg = d3.select(ref.current)\n      .attr('width', width)\n      .attr('height', height);\n\n    svg.selectAll(\"*\").remove(); // Clear previous contents if any\n\n    const rects = svg.selectAll(\"rect\")\n      .data(root.descendants())\n      .enter().append(\"rect\")\n      .attr(\"class\", \"node\")\n      .attr(\"x\", d => d.y0)\n      .attr(\"y\", d => d.x0)\n      .attr(\"width\", d => d.y1 - d.y0)\n      .attr(\"height\", d => d.x1 - d.x0)\n      .attr(\"fill\", d => color((d.children ? d : d.parent).data.name))\n      .on(\"click\", (event, d) => {\n        svg.transition()\n          .duration(750)\n          .tween(\"scale\", () => {\n            const xd = d3.interpolate(root.y0, d.y0),\n                  yd = d3.interpolate(root.x0, d.x0),\n                  kx = width / (d.y1 - d.y0),\n                  ky = height / (d.x1 - d.x0);\n            return t => {\n              root.y0 = xd(t);\n              root.x0 = yd(t);\n              svg.selectAll(\"rect\")\n                .attr(\"x\", d => d.y0)\n                .attr(\"y\", d => d.x0)\n                .attr(\"width\", d => d.y1 - d.y0)\n                .attr(\"height\", d => d.x1 - d.x0);\n            };\n          });\n      });\n\n    svg.selectAll(\"text\")\n      .data(root.descendants())\n      .enter().append(\"text\")\n      .attr(\"class\", \"label\")\n      .attr(\"x\", d => d.y0 + 4)\n      .attr(\"y\", d => (d.x0 + d.x1) / 2)\n      .text(d => d.data.name)\n      .style(\"fill\", \"#fff\");\n\n  }, [data]);\n\n  return (\n    <svg ref={ref}></svg>\n  );\n};\n\nexport default IciclePlot;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module"}