{"ast":null,"code":"var _jsxFileName = \"/home/gopal/PycharmProjects/Weetwood_react/frontend/src/IciclePlot.js\";\n// src/components/IciclePlot.js\nimport React, { useEffect, useRef, useState } from 'react';\nimport * as d3 from 'd3';\nconst IciclePlot = ({\n  data,\n  decisionRoute,\n  targetDecode\n}) => {\n  const ref = useRef();\n  useEffect(() => {\n    if (!data) return;\n    const svg = d3.select(ref.current);\n    const width = parseInt(svg.style('width'));\n    const height = parseInt(svg.style('height'));\n    svg.selectAll('*').remove();\n    const root = d3.hierarchy(data).sum(d => d.size).sort((a, b) => b.value - a.value);\n    const partition = d3.partition().size([width, height])(root);\n    const color = d3.scaleOrdinal(d3.schemeCategory10);\n    const nodes = svg.selectAll('rect').data(partition.descendants()).enter().append('rect').attr('x', d => d.x0).attr('y', d => d.y0).attr('width', d => d.x1 - d.x0).attr('height', d => d.y1 - d.y0).attr('fill', d => color((d.children ? d : d.parent).data.name)).on('mouseover', function (event, d) {\n      d3.select(this).style('stroke', '#000').style('stroke-width', 2);\n      highlightDecisionRoute(decisionRoute.node_index);\n    }).on('mouseout', function (event, d) {\n      d3.select(this).style('stroke', null).style('stroke-width', null);\n      svg.selectAll('rect').style('opacity', 1);\n    });\n    svg.selectAll('text').data(partition.descendants()).enter().append('text').attr('x', d => d.x0 + 4).attr('y', d => (d.y0 + d.y1) / 2).text(d => d.data.name).style('font', '10px sans-serif').style('fill', '#fff');\n    svg.append('text').attr('x', 10).attr('y', 20).text(`Target: ${targetDecode}`).style('font', '14px sans-serif').style('fill', '#000');\n    const highlightDecisionRoute = nodeIndex => {\n      const routeNodes = partition.descendants().filter(d => Object.values(nodeIndex).includes(d.data.featureid));\n      svg.selectAll('rect').style('opacity', 0.3);\n      routeNodes.forEach(d => {\n        svg.selectAll('rect').filter(node => node.data === d.data).style('opacity', 1);\n      });\n    };\n  }, [data, decisionRoute, targetDecode]);\n  return /*#__PURE__*/React.createElement(\"svg\", {\n    ref: ref,\n    style: {\n      width: '100%',\n      height: '400px'\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 70,\n      columnNumber: 5\n    }\n  });\n};\nexport default IciclePlot;","map":{"version":3,"names":["React","useEffect","useRef","useState","d3","IciclePlot","data","decisionRoute","targetDecode","ref","svg","select","current","width","parseInt","style","height","selectAll","remove","root","hierarchy","sum","d","size","sort","a","b","value","partition","color","scaleOrdinal","schemeCategory10","nodes","descendants","enter","append","attr","x0","y0","x1","y1","children","parent","name","on","event","highlightDecisionRoute","node_index","text","nodeIndex","routeNodes","filter","Object","values","includes","featureid","forEach","node","createElement","__self","__source","fileName","_jsxFileName","lineNumber","columnNumber"],"sources":["/home/gopal/PycharmProjects/Weetwood_react/frontend/src/IciclePlot.js"],"sourcesContent":["// src/components/IciclePlot.js\nimport React, { useEffect, useRef, useState } from 'react';\nimport * as d3 from 'd3';\n\nconst IciclePlot = ({ data, decisionRoute, targetDecode }) => {\n  const ref = useRef();\n\n  useEffect(() => {\n    if (!data) return;\n\n    const svg = d3.select(ref.current);\n    const width = parseInt(svg.style('width'));\n    const height = parseInt(svg.style('height'));\n\n    svg.selectAll('*').remove();\n\n    const root = d3.hierarchy(data)\n      .sum((d) => d.size)\n      .sort((a, b) => b.value - a.value);\n\n    const partition = d3.partition().size([width, height])(root);\n\n    const color = d3.scaleOrdinal(d3.schemeCategory10);\n\n    const nodes = svg.selectAll('rect')\n      .data(partition.descendants())\n      .enter().append('rect')\n      .attr('x', (d) => d.x0)\n      .attr('y', (d) => d.y0)\n      .attr('width', (d) => d.x1 - d.x0)\n      .attr('height', (d) => d.y1 - d.y0)\n      .attr('fill', (d) => color((d.children ? d : d.parent).data.name))\n      .on('mouseover', function (event, d) {\n        d3.select(this).style('stroke', '#000').style('stroke-width', 2);\n        highlightDecisionRoute(decisionRoute.node_index);\n      })\n      .on('mouseout', function (event, d) {\n        d3.select(this).style('stroke', null).style('stroke-width', null);\n        svg.selectAll('rect').style('opacity', 1);\n      });\n\n    svg.selectAll('text')\n      .data(partition.descendants())\n      .enter().append('text')\n      .attr('x', (d) => d.x0 + 4)\n      .attr('y', (d) => (d.y0 + d.y1) / 2)\n      .text((d) => d.data.name)\n      .style('font', '10px sans-serif')\n      .style('fill', '#fff');\n\n    svg.append('text')\n      .attr('x', 10)\n      .attr('y', 20)\n      .text(`Target: ${targetDecode}`)\n      .style('font', '14px sans-serif')\n      .style('fill', '#000');\n\n    const highlightDecisionRoute = (nodeIndex) => {\n      const routeNodes = partition.descendants().filter(d => Object.values(nodeIndex).includes(d.data.featureid));\n      svg.selectAll('rect').style('opacity', 0.3);\n      routeNodes.forEach(d => {\n        svg.selectAll('rect')\n          .filter(node => node.data === d.data)\n          .style('opacity', 1);\n      });\n    };\n  }, [data, decisionRoute, targetDecode]);\n\n  return (\n    <svg ref={ref} style={{ width: '100%', height: '400px' }}></svg>\n  );\n};\n\nexport default IciclePlot;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module"}